<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Uacmita's Candy</title>
    <!-- 
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" href="../static/css/bootstrap.css" />
    <script th:src="@{/js/bootstrap.js}" src="../js/bootstrap.js"></script>
     -->
     
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    <script th:src="@{/js/jquery.js}" src="../js/jquery.js"></script>
    
    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js" integrity="sha384-3LK/3kTpDE/Pkp8gTNp2gR/2gOiwQ6QaO7Td0zV76UFJVhqLl4Vl3KL1We6q6wR9" crossorigin="anonymous"></script>
    
    
    <style type="text/css">
    	/* CSS VARIABLES */
		:root {
		  --primary: #141414;
		  --light: #F3F3F3;
		  --dark: 	#686868;
		}
		
		html, body {
		  width: 100vw;
		  min-height: 100vh;
		  margin: 0;
		  padding: 0;
		  background-color: var(--primary);
		  color: var(--light);
		  font-family: Arial, Helvetica, sans-serif;
		  box-sizing: border-box;
		  line-height: 1.4;
		}
		
		img {
		  max-width: 100%;
		}
		
		h1 {
		  padding-top: 60px;  
		}
		
		.wrapper {
		  margin: 0;
		  padding: 0;
		}
		
		/* HEADER */
		header {
		  padding: 20px 20px 0 20px;
		  position: fixed;
		  top: 0;
		  display: grid;  
		  grid-gap:5px;
		  grid-template-columns: 1fr 4fr 1fr;
		  grid-template-areas: 
		   "nt mn mn sb . . . "; 
		  background-color: var(--primary);
		  width: 100%;
		  margin-bottom: 0px;  
		}
		
		.netflixLogo {
		  grid-area: nt;
		  object-fit: cover;
		  width: 100px;
		  max-height: 100%;
		  
		  padding-left: 30px;
		  padding-top: 0px;  
		}
		
		.netflixLogo img {  
		  height: 35px;     
		}
		
		#logo {
		  color: #E50914;  
		  margin: 0; 
		  padding: 0; 
		}
		
		
		.main-nav {
		  grid-area: mn;
		  padding: 0 30px 0 20px;
		}
		
		.main-nav a {
		  color: var(--light);
		  text-decoration: none;
		  margin: 5px;  
		}
		
		.main-nav a:hover {
		  color: var(--dark);
		}
		
		.sub-nav {
		  grid-area: sb;
		  padding: 0 40px 0 40px;
		}
		
		.sub-nav a {
		  color: var(--light);
		  text-decoration: none;
		  margin: 5px;
		}
		
		.sub-nav a:hover {
		  color: var(--dark);
		}
		
		
		/* MAIN CONTIANER */
		.main-container {
		  padding: 50px;
		}
		
		.box {
		  display: grid;
		  grid-gap: 20px;
		  grid-template-columns: repeat(6, minmax(100px, 1fr));
		}
		
		.box a {
		  transition: transform .3s;  
		}
		
		.box a:hover {
		  transition: transform .3s;
		  -ms-transform: scale(1.4);
		  -webkit-transform: scale(1.4);  
		  transform: scale(1.4);
		}
		
		
		.btn-flix:hover {
		  transition: transform .3s;
		  -ms-transform: scale(1.4);
		  -webkit-transform: scale(1.4);  
		  transform: scale(1.4);
		}
		
		.btn-flix {
		  background-color: Transparent;
	      background-repeat:no-repeat;
	      border: none;
	      cursor:pointer;
	      overflow: hidden;
	      outline:none;
		}
		
		.box img {
		  border-radius: 2px;
		}
		
		/* LINKS */
		.link {
		  padding: 50px;
		}
		
		.sub-links ul {
		  list-style: none;
		  padding: 0;
		  display: grid;
		  grid-gap: 20px;
		  grid-template-columns: repeat(4, 1fr);
		}
		
		.sub-links a {
		  color: var(--dark);
		  text-decoration: none;
		}
		
		.sub-links a:hover {
		  color: var(--dark);
		  text-decoration: underline;
		}
		
		.logos a{
		  padding: 10px;
		}
		
		.logo {
		  color: var(--dark);
		}
		
		
		/* FOOTER */
		footer {
		  padding: 20px;
		  text-align: center;
		  color: var(--dark);
		  margin: 10px;
		}
		
		/* MEDIA QUERIES */
		
		@media(max-width: 900px) {
		
		  header {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(2, 1fr);
		    grid-template-areas: 
		    "nt nt nt  .  .  . sb . . . "
		    "mn mn mn mn mn mn  mn mn mn mn";
		  }
		
		  .box {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(4, minmax(100px, 1fr));
		  }
		
		}
		
		@media(max-width: 700px) {
		
		  header {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(2, 1fr);
		    grid-template-areas: 
		    "nt nt nt  .  .  . sb . . . "
		    "mn mn mn mn mn mn  mn mn mn mn";
		  }
		
		  .box {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(3, minmax(100px, 1fr));
		  }
		
		  .sub-links ul {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(3, 1fr);
		  }
		   
		}
		
		@media(max-width: 500px) {
		
		  .wrapper {
		    font-size: 15px;
		  }
		
		  header {
		    margin: 0;
		    padding: 20px 0 0 0;
		    position: static;
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(1, 1fr);
		    grid-template-areas: 
		    "nt"    
		    "mn"
		    "sb";
		    text-align: center;
		  }
		
		  .netflixLogo {
		    max-width: 100%;
		    margin: auto;
		    padding-right: 20px;
		  }
		
		  .main-nav {
		    display: grid;
		    grid-gap: 0px;
		    grid-template-columns: repeat(1, 1fr);
		    text-align: center;
		  }
		
		  h1 {
		    text-align: center;
		    font-size: 18px;
		  }
		
		 
		
		  .box {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(1, 1fr);
		    text-align: center;    
		  }
		
		  .box a:hover {
		    transition: transform .3s;
		    -ms-transform: scale(1);
		    -webkit-transform: scale(1);  
		    transform: scale(1.2);
		  }
		  
		  
		  .btn-flix:hover {
		    transition: transform .3s;
		    -ms-transform: scale(1);
		    -webkit-transform: scale(1);  
		    transform: scale(1.2);
		  }
		
		  .logos {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(2, 1fr);
		    text-align: center;
		  }
		
		  .sub-links ul {
		    display: grid;
		    grid-gap: 20px;
		    grid-template-columns: repeat(1, 1fr);
		    text-align: center;
		    font-size: 15px;
		  }   
		}
		
		
    	hr {
		  margin-top: 1rem;
		  margin-bottom: 1rem;
		  border: 0;
		  border-top: 1px solid rgba(255, 255, 255, 0.1);
		}
    </style>
    
    
    <link rel="stylesheet" href="/css/check-animation.css" />
    
    
</head>


<body>
  <div class="wrapper">

    <!-- HEADER -->
    <header>
      <div class="netflixLogo">
        <a id="logo" href="#catalogos"><img src="/img/logo.png" alt="Logo empresa"></a>
      </div>
      <nav class="main-nav">
        <a href="#catalogosBox" onclick="showCatalogos()" >Catalogos</a>
      </nav>
      <nav class="sub-nav">
        <a href="#"><i class="fas fa-search sub-nav-logo"></i></a>
        <a href="#"><i class="fas fa-bell sub-nav-logo"></i></a>
        <button type="button" class="btn btn-outline-info" th:text="${cliente.nick_name}" id="btnClienteDatos" data-toggle='modal' data-target='.bd-cliente_datos-modal-lg' >
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
				<path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"></path>
			  	<path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path>
			  	<path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"></path>
			</svg>
        </button>
        <button type="button" class="btn btn-outline-success" id="btnCarritoDeCompras" data-toggle='modal' data-target='.bd-carrito-modal-lg' >
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart2" viewBox="0 0 16 16">
				<path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l1.25 5h8.22l1.25-5H3.14zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"></path>
			</svg>
            Carrito
        </button>
      </nav>      
    </header>
    <!-- END OF HEADER -->
    
    <!-- MAIN CONTAINER -->
    <section class="main-container" >
      <div class="location" id="catalogosBox">
          <h1 id="catalogos">Catalogos</h1>
          <div class="box" >
          	<div class="row" th:each="cata, hh : ${catalogos}">
          	 <div class="col-sm-12">
          		<div class="row">
	          		<div class="col-sm-12">
			            <a  > <!-- th:href="@{/catalogo/productos/tienda/{id}(id=${cata.id})}" -->
			            	<img th:src="@{${'/image/display/' + cata.id}}" th:attr="id=${cata.id}" onclick="getDulces(this)" alt="Nombre catalogo" />
			            </a>
		            </div>
		       	</div>
		       	<div class="row">
	          		<div class="col-sm-12">
	          			<p class="text-center" th:text="${cata.nombre}"></p>
	          		</div>
          		</div>
          	 </div>
            </div>
          </div>
      </div>
      
      <div class="location" id="locationDulces" >
          <h1 id="dulces">Dulces</h1>
          <div class="box" id="dulcesBox">
          </div>
      </div>
    </section>
    <!-- END OF MAIN CONTAINER -->
	
	<!-- MODALES -->
	
	<section class="modales">
		<div id="modalCarritoDeVentas" class='modal fade bd-carrito-modal-lg' tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true' style='color: var(--dark);'>
			<div class='modal-dialog modal-lg' role="document">
				<div class='modal-content' style='background-color: var(--primary); color: var(--light);'>
				    <div class="modal-header">
				     	<h5 class="modal-title">Articulos en el carrito</h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="background-color: var(--primary); color: var(--light);">x</button>
				    </div>
				    <div class="modal-body">
				        <div class="row">
				        	<div class="col-sm-12" id="modalCarritoDeVentasCuerpo">
				        	</div>
				        </div>
				        <div class="row">
				        	<div class="col-sm-12" id="modalTitulosMetodosDePago">
				        		<h5>Métodos de pago</h5>
				        		<br/>
				        		<h6>Selecciona método de pago</h6>
				        	</div>
				        </div>
				        <div class="row">
				        	<div class="col-sm-12" id="modalCarritoDeVentasMetodoDePago">
				        	</div>
				        </div>
				        <hr/>
				    </div>
				    <div class="modal-footer">
				        <!-- <button class="btn btn-primary">Save changes</button> -->
				        <button class="btn btn-primary" id="btnPagar">Pagar</button>
				        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				    </div>
				</div>
			</div>
		</div>
		
		<div id="modalDatosCliente" class='modal fade bd-cliente_datos-modal-lg' tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true' style='color: var(--dark);'>
			<div class='modal-dialog modal-lg' role="document">
				<div class='modal-content' style='background-color: var(--primary); color: var(--light);'>
				    <div class="modal-header">
				     	<h5 class="modal-title">Cliente</h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="background-color: var(--primary); color: var(--light);">x</button>
				    </div>
				    <div class="modal-body">
				        <div class="row">
				        	<div class="col-sm-12" id="modalDatosClienteCuerpo">
				        		
				        		<div class="row">
					        		<div class="col-sm-6">
					        			<h4>Nick name</h4>
					        		</div>
					        		<div class="col-sm-6">
					        			<h4 th:text="${cliente.nick_name}"> </h4>
					        		</div>
				        		</div>
				        		<div class="row">
					        		<div class="col-sm-6">
					        			<h4>Correo</h4>
					        		</div>
					        		<div class="col-sm-6">
					        			<h4 th:text="${cliente.correo}"> </h4>
					        		</div>
				        		</div>
				        		
				        	</div>
				        </div>
				        <hr/>
				        
				        <div class="row">
				        	<div class="col-sm-12" id="modalDatosClienteMetodoDePagoDatos">
				        	</div>
				        </div>
				        
				        <div class="row" >
				        	<div class="col-sm-9"></div>
				        	<div class="col-sm-3">
				        		<button class="btn btn-primary" id="btnRegistartarjeta">Añadir tarjeta</button>
				        	</div>
				        </div>
				        
				        <div class="row">
				        	<div class="col-sm-12" id="modalDatosClienteMetodoDePago">
				        		
				        		<form action="#" th:action="@{/clienteController/registrarTarjeta}"  method="post" enctype="multipart/form-data">
				        			<div class="form-row" hidden="true">
				        				<div class="col-sm-12 form-group" >
								        	<div class="form-group" >
											    <label for="tarjetaCliente">Id cliente</label>
											    <input type="number" class="form-control" id="idCliente" th:value="${cliente.id}" th:name="idCliente">
											</div>
				        				</div>
				        			</div>
					    			<div class="form-row">
				        				<div class="col-sm-12 form-group">
								        	<div class="form-group">
											    <label for="tarjetaTitular">Titular</label>
											    <input type="text" class="form-control" id="titular"  placeholder="Ingresa nombre" th:name="titular">
												<small id="tarjetaTitularAyuda" class="form-text text-muted">Límite de 30 caracteres.</small>
											</div>
				        				</div>
				        			</div>
					    			<div class="form-row">
				        				<div class="col-sm-9 form-group">
								        	<div class="form-group">
											    <label for="tarjetaNumero">Número de tarjeta</label>
											    <input type="text" class="form-control" id="numero"  placeholder="XXXX-XXXX-XXXX-XXXX" th:name="numero">
												<small id="tarjetaNumeroAyuda" class="form-text text-muted">Límite de 16 caracteres.</small>
											</div>
				        				</div>
				        				<div class="col-sm-3 form-group">
								        	<div class="form-group">
											    <label for="tarjetaCV">CV</label>
											    <input type="text" class="form-control" id="cv"  placeholder="XXX" th:name="cv">
												<small id="tarjetaCVAyuda" class="form-text text-muted">Límite de 3 caracteres.</small>
											</div>
				        				</div>
				        			</div>
					    			<div class="form-row">
				        				<div class="col-sm-3 form-group">
								        	<div class="form-group">
											    <label for="tarjetaMesValidoDesde">Mes valido desde</label>
											    <input type="text" class="form-control" id="mesValidoDesde" placeholder="01" th:name="mesValidoDesde">
												<small id="tarjetaMesValidoDesdeAyuda" class="form-text text-muted">Límite de 2 caracteres.</small>
											</div>
				        				</div>
				        				<div class="col-sm-3 form-group">
								        	<div class="form-group">
											    <label for="tarjetaAnioValidoDesde">Año valido desde</label>
											    <input type="text" class="form-control" id="anioValidoDesde" placeholder="2020" th:name="anioValidoDesde">
												<small id="tarjetaAnioValidoDesdeAyuda" class="form-text text-muted">Límite de 4 caracteres.</small>
											</div>
				        				</div>
				        				<div class="col-sm-3 form-group">
								        	<div class="form-group">
											    <label for="tarjetaMesValidoHasta">Mes valido hasta</label>
											    <input type="text" class="form-control" id="mesValidoHasta" placeholder="01" th:name="mesValidoHasta">
												<small id="tarjetaMesValidoHastaAyuda" class="form-text text-muted">Límite de 2 caracteres.</small>
											</div>
				        				</div>
				        				<div class="col-sm-3 form-group">
								        	<div class="form-group">
											    <label for="tarjetaAnioValidoHasta">Año valido hasta</label>
											    <input type="text" class="form-control" id="anioValidoHasta" placeholder="2030" th:name="anioValidoHasta">
												<small id="tarjetaAnioValidoHastaAyuda" class="form-text text-muted">Límite de 4 caracteres.</small>
											</div>
				        				</div>
				        			</div>
				        			
				        			<div class="form-row form-group">
					        			<div class="col-sm-9">
										</div>
					        			<div class="col-sm-3">
											<button type="submit" class="btn btn-primary">Registrar Tarjeta</button>
										</div>
									</div>
								</form>
				        		
				        	</div>
				        </div>
				    </div>
				    <div class="modal-footer">
				        <!-- <button class="btn btn-primary">Save changes</button> -->
				        
				        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
				    </div>
				</div>
			</div>
		</div>
		
	</section>
	
	<!-- END OF MODALES -->
	
    <!-- LINKS -->
    <section class="link">
      <div class="logos">
        <a href="#"><i class="fab fa-facebook-square fa-2x logo"></i></a>
        <a href="#"><i class="fab fa-instagram fa-2x logo"></i></a>
        <a href="#"><i class="fab fa-twitter fa-2x logo"></i></a>
        <a href="#"><i class="fab fa-youtube fa-2x logo"></i></a>
      </div>
      <div class="sub-links">
        <ul>
          <li><a href="#">Audio and Subtitles</a></li>
          <li><a href="#">Audio Description</a></li>
          <li><a href="#">Help Center</a></li>
          <li><a href="#">Gift Cards</a></li>
          <li><a href="#">Media Center</a></li>
          <li><a href="#">Investor Relations</a></li>
          <li><a href="#">Jobs</a></li>
          <li><a href="#">Terms of Use</a></li>
          <li><a href="#">Privacy</a></li>
          <li><a href="#">Legal Notices</a></li>
          <li><a href="#">Corporate Information</a></li>
          <li><a href="#">Contact Us</a></li>
        </ul>
      </div>
    </section>
    <!-- END OF LINKS -->

    <!-- FOOTER -->
    <footer>
      <p>&copy 2020-2021 Uacmita's Candy, Inc.</p>
      <p>Uacmita's Candy &copy 2020</p>
    </footer>
  </div>
  
  <script th:inline="javascript">
		/*<![CDATA[*/
	
	    var catalogos = /*[[${catalogos}]]*/
	    cliente = /*[[${cliente}]]*/
	    console.log(cliente)
		dulces
	    productosAPedir = {}
		
// 	    console.log(catalogos);
// 		console.log(cliente)
		
		function pagarCarrito() {
			console.log("productosAPedir")
			console.log(JSON.stringify(productosAPedir))
			metodoDePagoId = $('#modalCarritoDeVentasMetodoDePago input:radio:checked').val()
			console.log("metodoDePagoId: " + metodoDePagoId)
			html = ""
			datos = {
				"idCliente": cliente.id,
				"articulos": JSON.stringify(productosAPedir),
				"metodoDePagoId": metodoDePagoId
			}
			$.ajax({
				url: '/carritoController/pagarCarrito',
				type: 'POST',
				contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
				data: datos,
				success: function(resultado) {
					console.log(resultado)
					if (resultado == "pagado") {
						html = "<h5>Pagado</h5>"
						$("#modalTitulosMetodosDePago").empty()
						$(html).appendTo("#modalTitulosMetodosDePago");
						html = "<div class='success-checkmark'>" +
								  "<div class='check-icon'>" +
								    "<span class='icon-line line-tip'></span>" +
								    "<span class='icon-line line-long'></span>" +
								    "<div class='icon-circle'></div>" +
								    "<div class='icon-fix'></div>" +
								  "</div>" +
								"</div>"
					  	$(".check-icon").hide();
					  	setTimeout(function () {
						    $(".check-icon").show();
					  	}, 10);
					  	$(".check-icon").hide();
					  	html = "<h3 class='text-center'>Articulos exitosamente pagados</h3>"
					}
					html = ""
					
				}
			});
		}
		
		function showTarjetas() {
			html = ""
			datos = {
				"idCliente": cliente.id
			}
			$.ajax({
				url: '/clienteController/obtenerMetodosDePago',
				type: 'POST',
				contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
				data: datos,
				success: function(metodosDePago) {
					console.log(metodosDePago)
					html = ""
		         	for (var tarjeta of metodosDePago) {
			         	cadena = "<div class='row'>" +
							 		"<div class='col-sm-4'>" +
							        	"<h5>Tarjeta </h5>" +
							        "</div>" +
							        "<div class='col-sm-4'>" +
						        		tarjeta.numero +
						        	"</div>" +
					         	"</div>"		
						html += cadena
		         	}
		         	$("#modalDatosClienteMetodoDePagoDatos").empty();
					$(html).appendTo("#modalDatosClienteMetodoDePagoDatos");
				}
			});
		}
		
		function putMetodosDePago() {
			html = ""
			datos = {
				"idCliente": cliente.id
			}
			$.ajax({
				url: '/clienteController/obtenerMetodosDePago',
				type: 'POST',
				contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
				data: datos,
				success: function(metodosDePago) {
					console.log("showTarejtas()")
					console.log(metodosDePago)
					html = ""
		         	for (var tarjeta of metodosDePago) {
			         	cadena = 	"<div class='form-check'>" +
									 	"<input class='form-check-input' type='radio' name='gridRadios' id='gridRadios_" + tarjeta.id + "' value='" + tarjeta.id + "' checked />" +
									    	"<label class='form-check-label' for='gridRadios_" + tarjeta.id + "'>" +
									        	tarjeta.numero +
									        "</label>" +
						         	"</div>"		
						html += cadena
		         	}
		        	console.log(html)
		         	//$("#modalDatosClienteMetodoDePago").prepend(html);
		        	
					$(html).appendTo("#modalCarritoDeVentasMetodoDePago");
				}
			});
				
		
		}
		
		function putPorducto(idProducto, cantidad) {
			datos = {
				"id": idProducto
			}
			$.ajax({
				url: '/dulce/obtenerDulce',
				type: 'POST',
				contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
				data: datos,
				success: function(dulce) {
					console.log(dulce)
					html = "<div class='row'>" +
					        	"<div class='col-sm-4'>" +
					        		"<img id='" + dulce.id + "' src='data:image/png;base64," + dulce.imagen + "' alt='Nombre dulce' width='150' height='150' />" +
					        	"</div>" +
					        	"<div class='col-sm-8'>" +
					        		"<div class='row'>" +
					        			"<div class='col-sm-10 text-lefth'>" +
					        				"<h4>Cantidad a pedir</h4>" +
					        			"</div>" +
					        			"<div class='col-sm-2 text-lefth'>" +
					        				"<h6>" + cantidad + "</h6>" +
					        			"</div>" +
					        		"</div>" +
					        		"<div class='row'>" +
					        			"<div class='col-sm-10 text-lefth'>" +
					        				"<h4>Precio</h4>" +
					        			"</div>" +
					        			"<div class='col-sm-2 text-lefth'>" +
					        				"<h6>$" + dulce.precio + "</h6>" +
					        			"</div>" +
					        		"</div>" +
					        		"<div class='row'>" +
					        			"<div class='col-sm-10 text-lefth'>" +
					        				"<h4>Precio total de " + dulce.nombre + "</h4>" +
					        			"</div>" +
					        			"<div class='col-sm-2 text-lefth'>" +
					        				"<h6>$" + cantidad * dulce.precio + "</h6>" +
					        			"</div>" +
					        		"</div>" +
					        	"</div>" +
					        "</div>" +
					        "<hr/>"
					$(html).appendTo("#modalCarritoDeVentasCuerpo");
				}
			});
			
		}
		
		function showCarrito() {
			console.log("productosAPedir");
			console.log(productosAPedir);
			$("#modalCarritoDeVentasCuerpo").empty();
			Object.keys(productosAPedir).forEach(function(key) {
				putPorducto(productosAPedir[key]["idProducto"], productosAPedir[key]["cantidad"]);
			});
			putMetodosDePago();
			//$('#modalCarritoDeVentasCuerpo').modal('toggle');
		}
		
		function showCatalogos() {
			$("#locationDulces").hide( "slow" );
			$("#catalogosBox").show( "slow" );
		}
		
		function agregarProducto(idProducto, cantidad) {
			producto = {
				"idProducto": idProducto,
				"cantidad": cantidad
			}
			productosAPedir[idProducto] = producto;
		}
		
		function sumar(idInput) {
			//console.log("idInput: " + idInput);
			actual = parseInt($("#" + idInput).val());
			actual += 1;
			idProducto = idInput.split("_")[1];
			agregarProducto(idProducto, actual);
			$("#" + idInput).val(actual);
		}
		
		function restar(idInput) {
			//console.log("idInput: " + idInput)
			actual = parseInt($("#" + idInput).val())
			if (actual >= 1) {
				actual -= 1
				idProducto = idInput.split("_")[1];
				agregarProducto(idProducto, actual);
				$("#" + idInput).val(actual)
			}
		}
		
		function getDulces(catalogo) {
			//console.log(catalogo)
			//console.log(catalogo.id)
			datos = {
				"id": catalogo.id
			}
			$.ajax({
		         url: '/catalogo/productos/tienda/',
		         type: 'POST',
		         contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
		         data: datos,
		         success: function(data) {
// 		        	console.log(data)
// 		        	console.log(data[0])
		        	html = ""
		         	for (var dulce of data) {
		         		cadena = "<div class='row' >" +
			                		"<div class='col-sm-12'>" +
			                			"<div class='row'>" +
			      	          				"<div class='col-sm-12'>" +
					      			          	"<button type='button' class='btn btn-flix' data-toggle='modal' data-target='.bd-" + dulce.id + "-modal-lg' >" +
					      			          		"<img id='" + dulce.id + "' src='data:image/png;base64," + dulce.imagen + "' alt='Nombre dulce' width='200' height='200' />" +
					      		            	"</button>" +
						      					"<div class='modal fade bd-" + dulce.id + "-modal-lg' tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true' style='color: var(--dark);'>" +
						      						"<div class='modal-dialog modal-lg'>" +
						      							"<div class='modal-content' style='background-color: var(--primary); color: var(--light);'>" +
						      								"<div class='row'>" +
						      									"<div class='col-sm-12'>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-12 text-center'>" +
								      						        		"<img id='" + dulce.id + "' src='data:image/png;base64," + dulce.imagen + "' alt='Nombre dulce' width='300' height='300' />" +
							      										"</div>" +
								      						       	"</div>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Dulce</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>" + dulce.nombre + "</h7>" +
						      											"</div>" +
								      						       	"</div>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Marca</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>" + dulce.marca + "</h7>" +
						      											"</div>" +
							      						       		"</div>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Descripción</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>" + dulce.descripcion + "</h7>" +
						      											"</div>" +
								      						       	"</div>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Cantidad disponible</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>" + dulce.cantidad + "</h7>" +
						      											"</div>" +
								      						       	"</div>" +
							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Descuento</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>" + dulce.descuento + "%</h7>" +
						      											"</div>" +
								      						       	"</div>" +

							      									"<div class='row'>" +
								      						        	"<div class='col-sm-6'>" +
							      											"<h4>Precio</h4>" +
							      										"</div>" +
							      										"<div class='col-sm-6'>" +
						      												"<h7>$" + dulce.precio + "</h7>" +
						      											"</div>" +
								      						       	"</div>" +
						      									"</div>" +
						      								"</div>" +
						      					    	"</div>" +
						      					  	"</div>" +
						      					"</div>" +
					      		            "</div>" +
					      		       	"</div>" +
			      		       			"<div class='row'>" +
			      	          				"<div class='col-sm-12'>" +
			      	          					"<h4 class='text-right' >" + dulce.nombre + "</h4>" +
			      	          				"</div>" +
		                				"</div>" +
		                				"<div class='row'>" +
			      	          				"<div class='col-sm-12'>" +
			      	          					"<h4 class='text-right' >$" + dulce.precio + "</h4>" +
			      	          				"</div>" +
		                				"</div>" +
		                				"<div class='row'>" +
		                					"<div class='col-sm-4 text-lefth'>" +
			                					"<button type='button' class='btn btn-outline-danger' onclick='restar(" + "\"cantidadDeArticulo_" + dulce.id + "\"" +")'>" +
				                	            	"<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-dash' viewBox='0 0 16 16'>" +
								                		"<path d='M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z'></path>" +
								                	"</svg>" +
		                	              		"</button>" +
		                					"</div>" +
		                					"<div class='col-sm-4 text-center'>" +
		                						"<input type='number' class='form-control' name='dulcesCantidadesSolicitadas' id='cantidadDeArticulo_" + dulce.id + "' min='0' max='" + dulce.cantidad + "' value='0' readonly />" +
		                					"</div>" +
		                					"<div class='col-sm-4 text-right'>" +
			                					"<button type='button' class='btn btn-outline-success' onclick='sumar(" + "\"cantidadDeArticulo_" + dulce.id + "\"" +")'>" +
				                	                "<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-plus' viewBox='0 0 16 16'>" +
								                		"<path d='M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z'></path>" +
								                	"</svg>" +
			                	              	"</button>" +
		                					"</div>" +
		                				"</div>" +
			                		"</div>" +
			                  	"</div>"
				    	html += cadena
		         	}
		         	$("#catalogosBox").hide( "slow" );
		         	$("#dulcesBox").empty();
		         	$(html).appendTo("#dulcesBox");
		         	$("#locationDulces").show( "slow" );
		         	
		         }
		     });
			
		}
		
		$( document ).ready(function() {
		    console.log( "ready!" );
		    $("#locationDulces").hide();
		    $("#modalDatosClienteMetodoDePago").hide();
		    $("#btnCarritoDeCompras").click(function (){
		    	$("#modalCarritoDeVentasMetodoDePago").empty();
		    	showCarrito();
		    });
		    $("#btnClienteDatos").click(function (){
		    	showTarjetas();
		    	$("#modalDatosClienteMetodoDePago").hide( "slow" );
		    });
		    $("#btnRegistartarjeta").click(function (){
		    	$("#modalDatosClienteMetodoDePago").show( "slow" );
		    });
		    $("#btnPagar").click(function (){
		    	pagarCarrito();
		    });
		    
		});
		
		
		/*]]>*/
	</script>
  
</body>



</html>